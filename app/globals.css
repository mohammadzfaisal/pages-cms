@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 0 0% 98%;
    --foreground: 0 0% 9%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 9%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 9%;
    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 96%;
    --secondary-foreground: 0 0% 9%;
    --muted: 0 0% 96%;
    --muted-foreground: 0 0% 45%;
    --accent: 0 0% 96%;
    --accent-foreground: 0 0% 9%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 90%;
    --input: 0 0% 90%;
    --ring: 0 0% 9%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 0 0% 3%;
    --foreground: 0 0% 98%;
    --card: 0 0% 5%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 5%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;
    --secondary: 0 0% 12%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 12%;
    --muted-foreground: 0 0% 60%;
    --accent: 0 0% 12%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 18%;
    --input: 0 0% 18%;
    --ring: 0 0% 83%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  html {
    @apply text-base-sm md:text-base text-foreground;
    color-scheme: light;
    background: transparent;
    scroll-behavior: smooth;
  }
  body {
    @apply text-base font-primary font-normal leading-relaxed text-foreground;
    background:
      radial-gradient(ellipse 80% 50% at 50% -20%, hsl(0 0% 8%) 0%, transparent 60%),
      linear-gradient(to bottom, hsl(var(--background)) 0%, hsl(0 0% 0%) 100%);
    min-height: 100vh;
  }

  /* Smooth transitions for interactive elements */
  a, button, [role="button"], input, textarea, select {
    transition: color 150ms cubic-bezier(0.4, 0, 0.2, 1),
                background-color 150ms cubic-bezier(0.4, 0, 0.2, 1),
                border-color 150ms cubic-bezier(0.4, 0, 0.2, 1),
                opacity 150ms cubic-bezier(0.4, 0, 0.2, 1),
                transform 150ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Focus visible for keyboard navigation (WCAG 2.4.7) */
  *:focus-visible {
    outline: 2px solid hsl(var(--ring));
    outline-offset: 2px;
  }

  /* Subtle hover lift for buttons */
  button:not(:disabled):hover,
  a[role="button"]:hover,
  [role="button"]:not([aria-disabled="true"]):hover {
    transform: translateY(-1px);
  }

  button:not(:disabled):active,
  a[role="button"]:active,
  [role="button"]:not([aria-disabled="true"]):active {
    transform: translateY(0);
  }

  /* Reduce motion for accessibility (WCAG 2.3.3) */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* Skip to main content link for keyboard navigation (WCAG 2.4.1) */
  .skip-to-main {
    position: absolute;
    left: -9999px;
    z-index: 999;
    padding: 1rem 1.5rem;
    background-color: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    text-decoration: none;
    border-radius: 0.5rem;
  }

  .skip-to-main:focus {
    left: 1rem;
    top: 1rem;
  }

  /* Ensure links have sufficient contrast and underline (WCAG 1.4.1) */
  main a:not([role="button"]):not([class*="button"]) {
    text-decoration: underline;
    text-decoration-color: hsl(var(--muted-foreground));
    text-underline-offset: 0.2em;
  }

  main a:not([role="button"]):not([class*="button"]):hover {
    text-decoration-color: currentColor;
  }
  .dark {
    color-scheme: dark;
  }
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-secondary font-bold leading-tight text-foreground;
  }
  h1,
  .h1 {
    @apply text-h1-sm md:text-h1;
  }
  h2,
  .h2 {
    @apply text-h2-sm md:text-h2;
  }
  h3,
  .h3 {
    @apply text-h3-sm md:text-h3;
  }
  h4,
  .h4 {
    @apply text-h4;
  }
  h5,
  .h5 {
    @apply text-h5;
  }
  h6,
  .h6 {
    @apply text-h6;
  }
  b,
  strong {
    @apply font-semibold;
  }
  code {
    @apply after:border-none;
  }
  blockquote > p {
    @apply my-0;
  }
  button {
    @apply cursor-pointer;
  }
}

@layer components {
  .section {
    @apply py-24 xl:py-28;
  }

  .section-sm {
    @apply py-16 xl:py-20;
  }

  .container {
    @apply mx-auto xl:!max-w-[1320px] px-4;
  }

  .social-icons {
    @apply space-x-4;
  }
  .social-icons li {
    @apply inline-block;
  }
  .social-icons li a {
    @apply flex h-9 w-9 items-center justify-center rounded-sm bg-primary text-center leading-9 text-primary-foreground;
  }
  .social-icons li a svg {
    @apply h-5 w-5;
  }

  .notice {
    @apply mb-6 rounded-lg border px-8 py-6;
  }

  .notice-head {
    @apply flex items-center;
  }

  .notice-head svg {
    @apply mr-3;
  }

  .notice-head p {
    @apply font-secondary text-xl font-semibold text-foreground;
  }

  .notice-body {
    @apply mt-3;
  }

  .notice-body p {
    @apply my-0;
  }

  .notice.note {
    @apply text-[#1B83E2];
    @apply border-current;
  }

  .notice.tip {
    @apply text-[#40D294];
    @apply border-current;
  }

  .notice.info {
    @apply text-[#E3A72C];
    @apply border-current;
  }

  .notice.warning {
    @apply text-[#DB2C23];
    @apply border-current;
  }

  .tab {
    @apply overflow-hidden rounded-lg border border-border;
  }

  .tab-nav {
    @apply flex border-b border-border bg-muted !m-0 !list-none;
  }

  .tab-nav-item {
    @apply cursor-pointer border-b-[3px] border-transparent py-2 text-lg text-muted-foreground opacity-80 !my-0 !px-8;
  }

  .tab-nav-item.active {
    @apply border-b-[3px] border-foreground opacity-100;
  }

  .tab-content {
    @apply px-5;
  }

  .tab-content-panel {
    @apply p-8;
  }

  .tab-content-panel p {
    @apply mb-0;
  }

  .tab-content-panel.active {
    @apply block;
  }

  .accordion {
    @apply mb-6 overflow-hidden rounded-lg border border-border bg-card;
  }

  .accordion-header {
    @apply flex w-full cursor-pointer items-center justify-between px-8 py-4 text-lg text-foreground bg-card;
  }

  .accordion-icon {
    @apply h-[.8em] w-[.8em] rotate-[-90deg] transition-transform duration-200;
  }

  .accordion-content {
    @apply max-h-0 overflow-hidden px-8 py-0;
  }

  .accordion.active .accordion-icon {
    @apply rotate-0;
  }

  .accordion.active .accordion-content {
    @apply max-h-screen;
  }

  .modal {
    @apply fixed inset-0 z-40 hidden h-full w-full overflow-auto;
  }

  .modal-overlay {
    @apply fixed inset-0 z-40 hidden h-full w-full bg-black/40;
  }

  .modal-content {
    @apply relative top-1/2 z-50 mx-auto max-w-[90%] -translate-y-1/2 rounded-lg bg-card border border-border p-8;
  }

  .modal-close {
    @apply absolute right-3 top-3 h-8 w-8 rounded-full bg-secondary text-center leading-8 text-foreground;
  }

  .header {
    @apply bg-background border-b border-border py-6;
  }

  .navbar {
    @apply relative flex flex-wrap items-center justify-between;
  }

  .navbar-brand {
    @apply text-foreground text-xl font-semibold;
  }

  .navbar-nav {
    @apply text-center lg:text-left;
  }

  .nav-link {
    @apply text-muted-foreground hover:text-foreground block p-3 cursor-pointer font-medium transition lg:px-2 lg:py-3;
  }

  .nav-dropdown {
    @apply mr-0;
  }

  .nav-dropdown > svg {
    @apply pointer-events-none;
  }

  .nav-dropdown-list {
    @apply bg-card border border-border z-10 min-w-[180px] rounded p-4 shadow-lg;
  }

  .nav-dropdown-item {
    @apply [&:not(:last-child)]:mb-2;
  }

  .nav-dropdown-link {
    @apply text-muted-foreground hover:text-foreground block py-1 font-medium transition;
  }

  .theme-switcher {
    @apply inline-flex;
  }

  .theme-switcher label {
    @apply bg-border relative inline-block h-4 w-6 cursor-pointer rounded-2xl lg:w-10;
  }

  .theme-switcher input {
    @apply absolute opacity-0;
  }

  .theme-switcher span {
    @apply bg-dark absolute -top-1 left-0 flex h-6 w-6 items-center justify-center rounded-full transition-all duration-300 dark:bg-white;
  }

  .theme-switcher input:checked + label span {
    @apply lg:left-4;
  }

  .search-modal {
    @apply z-50 fixed top-0 left-0 w-full h-full flex items-start justify-center invisible opacity-0;
  }
  .search-modal.show {
    @apply visible opacity-100;
  }
  .search-modal-overlay {
    @apply fixed top-0 left-0 w-full h-full bg-black opacity-50;
  }
  .search-wrapper {
    @apply bg-card border border-border w-[660px] max-w-[96%] mt-24 rounded shadow-lg relative z-10;
  }
  .search-wrapper-header {
    @apply p-4 relative;
  }
  .search-wrapper-header-input {
    @apply border border-solid w-full focus:ring-0 focus:border-foreground border-border rounded-[4px] h-12 pr-4 pl-10 transition duration-200 outline-none bg-background text-foreground;
  }
  .search-wrapper-body {
    @apply max-h-[calc(100vh-350px)] overflow-y-auto bg-muted p-4 rounded;
  }
  .search-wrapper-footer {
    @apply text-xs select-none leading-none md:flex items-center px-3.5 py-2 hidden;
  }
  .search-wrapper-footer kbd {
    @apply bg-muted text-xs leading-none text-center mr-[3px] px-1 py-0.5 rounded-[3px];
  }
  .search-wrapper-footer span:not(:last-child) {
    @apply mr-4;
  }
  .search-wrapper-footer span:last-child {
    @apply ml-auto;
  }
  .search-result-empty {
    @apply text-center cursor-text select-none px-0 py-8;
  }
  .search-result-group {
    @apply mb-4;
  }
  .search-result-group-title {
    @apply text-lg text-foreground mb-[5px] px-3;
  }
  .search-result-item {
    @apply rounded border bg-card flex items-start mb-1 p-4 scroll-my-[30px] border-solid border-border relative;
  }
  .search-result-item mark {
    @apply bg-yellow-200 rounded-[2px];
  }
  .search-result-item-title {
    @apply text-lg font-bold text-foreground leading-none;
  }
  .search-result-item-link::after {
    @apply absolute top-0 right-0 bottom-0 left-0 z-10 content-[""];
  }
  .search-result-item-image {
    @apply shrink-0 mr-3.5;
  }
  .search-result-item-image img {
    @apply w-[60px] h-[60px] md:w-[100px] md:h-[100px] rounded-[4px] object-cover;
  }
  .search-result-item-description {
    @apply text-sm mt-1;
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  .search-result-item-content {
    @apply mx-0 my-1.5 empty:hidden;
    display: -webkit-box;
    -webkit-line-clamp: 1;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  .search-result-item-taxonomies {
    @apply text-sm flex flex-wrap items-center text-muted-foreground;
  }
  .search-result-item-taxonomies svg {
    @apply inline-block mr-1;
  }
  .search-result-item-active,
  .search-result-item:focus,
  .search-result-item:hover {
    @apply bg-accent;
  }
  .search-result-item-active .search-result-item-title,
  .search-result-item:focus .search-result-item-title,
  .search-result-item:hover .search-result-item-title {
    @apply text-accent-foreground;
  }
  .search-result-item-active .search-result-item-description,
  .search-result-item:focus .search-result-item-description,
  .search-result-item:hover .search-result-item-description {
    @apply text-accent-foreground/80;
  }
  .search-result-item-active .search-result-item-content,
  .search-result-item:focus .search-result-item-content,
  .search-result-item:hover .search-result-item-content {
    @apply text-accent-foreground/90;
  }
  .search-result-item-active .search-result-item-taxonomies,
  .search-result-item:focus .search-result-item-taxonomies,
  .search-result-item:hover .search-result-item-taxonomies {
    @apply text-accent-foreground/90;
  }
}

@layer utilities {
  .bg-gradient {
    @apply bg-gradient-to-b from-muted/50 to-background;
  }

  .form-input {
    @apply w-full rounded border border-input bg-background px-6 py-4 text-foreground placeholder:text-muted-foreground focus:border-ring focus:ring-1 focus:ring-ring outline-none transition-colors;
  }

  .form-label {
    @apply mb-4 block font-secondary text-xl font-normal text-foreground;
  }

  input#nav-toggle:checked + label #show-button {
    @apply hidden;
  }

  input#nav-toggle:checked + label #hide-button {
    @apply block;
  }

  input#nav-toggle:checked ~ #nav-menu {
    @apply max-lg:block;
  }

  .swiper-pagination-bullet {
    @apply h-2.5 w-2.5 bg-muted opacity-100;
  }

  .swiper-pagination-bullet-active {
    @apply h-4 w-4 bg-primary;
  }
}

.scrollbar {
  scrollbar-width: thin;
}

.sonner-spinner {
  @apply !left-0 !top-0 !animate-spin;
  background-image: url('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="%230a0a0a" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-loader"%3E%3Cpath d="M12 2v4"/%3E%3Cpath d="m16.2 7.8 2.9-2.9"/%3E%3Cpath d="M18 12h4"/%3E%3Cpath d="m16.2 16.2 2.9 2.9"/%3E%3Cpath d="M12 18v4"/%3E%3Cpath d="m4.9 19.1 2.9-2.9"/%3E%3Cpath d="M2 12h4"/%3E%3Cpath d="m4.9 4.9 2.9 2.9"/%3E%3C/svg%3E');
}

.dark .sonner-spinner {
  background-image: url('data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="%23ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-loader"%3E%3Cpath d="M12 2v4"/%3E%3Cpath d="m16.2 7.8 2.9-2.9"/%3E%3Cpath d="M18 12h4"/%3E%3Cpath d="m16.2 16.2 2.9 2.9"/%3E%3Cpath d="M12 18v4"/%3E%3Cpath d="m4.9 19.1 2.9-2.9"/%3E%3Cpath d="M2 12h4"/%3E%3Cpath d="m4.9 4.9 2.9 2.9"/%3E%3C/svg%3E');
}

.sonner-spinner > div {
  display: none;
}
